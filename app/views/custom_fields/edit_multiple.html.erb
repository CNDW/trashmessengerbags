<%= form_tag update_multiple_custom_fields_path, method: :put do %>
	<% @custom_fields.each do |field| %>
		<%= fields_for "custom_fields[]", field do |builder| %>
			<% if field.errors.any? %>
		    <div id="error_explanation">
		      <h2><%= pluralize(field.errors.count, "error") %> prohibited this field from being saved:</h2>

		      <ul>
		      <% field.errors.full_messages.each do |msg| %>
		        <li><%= msg %></li>
		      <% end %>
		      </ul>
		    </div>
		  <% end %>
			<h3><%= field.name %></h3>

    	<%= render 'fields', f: builder %>
		<% end %>
	<% end %>

	<%= fields_for "custom_fields[]" do |builder| %>
		<%= link_to_add_fields "Add Field", @parent %> 
	<% end %>

	<div class="actions">
	  <%= submit_tag "Update" %>
	</div>

<% end %>
	
<input type="hidden" value="0" name="bad_param[new][baaaad]"></input>